"use strict";var V=Object.defineProperty;var q=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j=(e,t,n)=>q(e,typeof t!="symbol"?t+"":t,n);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const obsidian=require("obsidian"),equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const n=Listener,s=Owner,o=e.length===0,i=t===void 0?s:t,a=o?UNOWNED:{owned:null,cleanups:null,context:i?i.context:null,owner:i},c=o?e:()=>e(()=>untrack(()=>cleanNode(a)));Owner=a,Listener=null;try{return runUpdates(c,!0)}finally{Listener=n,Owner=s}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.value)),writeSignal(n,o));return[readSignal.bind(n),s]}function createRenderEffect(e,t,n){const s=createComputation(e,t,!1,STALE);updateComputation(s)}function createEffect(e,t,n){runEffects=runUserEffects;const s=createComputation(e,t,!1,STALE);s.user=!0,Effects?Effects.push(s):updateComputation(s)}function createMemo(e,t,n){n=n?Object.assign({},signalOptions,n):signalOptions;const s=createComputation(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,updateComputation(s),readSignal.bind(s)}function batch(e){return runUpdates(e,!1)}function untrack(e){if(Listener===null)return e();const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const e=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=e}if(Listener){const e=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(e)):(Listener.sources=[this],Listener.sourceSlots=[e]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],a=Transition&&Transition.running;a&&Transition.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?Updates.push(i):Effects.push(i),i.observers&&markDownstream(i)),a||(i.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=ExecCount;runComputation(e,e.value,t)}function runComputation(e,t,n){let s;const o=Owner,i=Listener;Listener=Owner=e;try{s=e.fn(t)}catch(a){return e.pure&&(e.state=STALE,e.owned&&e.owned.forEach(cleanNode),e.owned=null),e.updatedAt=n+1,handleError(a)}finally{Listener=i,Owner=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,s):e.value=s,e.updatedAt=n)}function createComputation(e,t,n,s=STALE,o){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:Owner?Owner.context:null,pure:n};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(i):Owner.owned=[i]),i}function runTop(e){if(e.state===0)return;if(e.state===PENDING)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===STALE)updateComputation(e);else if(e.state===PENDING){const s=Updates;Updates=null,runUpdates(()=>lookUpstream(e,t[0]),!1),Updates=s}}function runUpdates(e,t){if(Updates)return e();let n=!1;t||(Updates=[]),Effects?n=!0:Effects=[],ExecCount++;try{const s=e();return completeUpdates(n),s}catch(s){n||(Effects=null),Updates=null,handleError(s)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:runTop(s)}for(t=0;t<n;t++)runTop(e[t])}function lookUpstream(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const o=s.state;o===STALE?s!==t&&(!s.updatedAt||s.updatedAt<ExecCount)&&runTop(s):o===PENDING&&lookUpstream(s,t)}}}function markDownstream(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=PENDING,n.pure?Updates.push(n):Effects.push(n),n.observers&&markDownstream(n))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const i=o.pop(),a=n.observerSlots.pop();s<o.length&&(i.sourceSlots[a]=s,o[s]=i,n.observerSlots[s]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function castError(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function handleError(e,t=Owner){throw castError(e)}const FALLBACK=Symbol("fallback");function dispose(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,n={}){let s=[],o=[],i=[],a=0,c=t.length>1?[]:null;return onCleanup(()=>dispose(i)),()=>{let m=e()||[],l=m.length,d,u;return m[$TRACK],untrack(()=>{let S,A,O,_,x,f,w,b,E;if(l===0)a!==0&&(dispose(i),i=[],s=[],o=[],a=0,c&&(c=[])),n.fallback&&(s=[FALLBACK],o[0]=createRoot(C=>(i[0]=C,n.fallback())),a=1);else if(a===0){for(o=new Array(l),u=0;u<l;u++)s[u]=m[u],o[u]=createRoot($);a=l}else{for(O=new Array(l),_=new Array(l),c&&(x=new Array(l)),f=0,w=Math.min(a,l);f<w&&s[f]===m[f];f++);for(w=a-1,b=l-1;w>=f&&b>=f&&s[w]===m[b];w--,b--)O[b]=o[w],_[b]=i[w],c&&(x[b]=c[w]);for(S=new Map,A=new Array(b+1),u=b;u>=f;u--)E=m[u],d=S.get(E),A[u]=d===void 0?-1:d,S.set(E,u);for(d=f;d<=w;d++)E=s[d],u=S.get(E),u!==void 0&&u!==-1?(O[u]=o[d],_[u]=i[d],c&&(x[u]=c[d]),u=A[u],S.set(E,u)):i[d]();for(u=f;u<l;u++)u in O?(o[u]=O[u],i[u]=_[u],c&&(c[u]=x[u],c[u](u))):o[u]=createRoot($);o=o.slice(0,a=l),s=m.slice(0)}return o});function $(S){if(i[u]=S,c){const[A,O]=createSignal(u);return c[u]=O,t(m[u],A)}return t(m[u])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}const narrowedError=e=>`Stale read from <${e}>.`;function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){const t=e.keyed,n=createMemo(()=>e.when,void 0,{equals:(s,o)=>t?s===o:!s==!o});return createMemo(()=>{const s=n();if(s){const o=e.children;return typeof o=="function"&&o.length>0?untrack(()=>o(t?s:()=>{if(!untrack(n))throw narrowedError("Show");return e.when})):o}return e.fallback},void 0,void 0)}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(e,t){const n=PropAliases[e];return typeof n=="object"?n[t]?n.$:void 0:n}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function reconcileArrays(e,t,n){let s=n.length,o=t.length,i=s,a=0,c=0,m=t[o-1].nextSibling,l=null;for(;a<o||c<i;){if(t[a]===n[c]){a++,c++;continue}for(;t[o-1]===n[i-1];)o--,i--;if(o===a){const d=i<s?c?n[c-1].nextSibling:n[i-c]:m;for(;c<i;)e.insertBefore(n[c++],d)}else if(i===c)for(;a<o;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[i-1]&&n[c]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(n[c++],t[a++].nextSibling),e.insertBefore(n[--i],d),t[o]=n[i]}else{if(!l){l=new Map;let u=c;for(;u<i;)l.set(n[u],u++)}const d=l.get(t[a]);if(d!=null)if(c<d&&d<i){let u=a,$=1,S;for(;++u<o&&u<i&&!((S=l.get(t[u]))==null||S!==d+$);)$++;if($>d-c){const A=t[a];for(;c<d;)e.insertBefore(n[c++],A)}else e.replaceChild(n[c++],t[a++])}else a++;else t[a++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,n,s={}){let o;return createRoot(i=>{o=i,t===document?e():insert(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{o(),t.textContent=""}}function template(e,t,n){let s;const o=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},i=()=>(s||(s=o())).cloneNode(!0);return i.cloneNode=i,i}function delegateEvents(e,t=window.document){const n=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let s=0,o=e.length;s<o;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,eventHandler))}}function setAttribute(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function className(e,t){t==null?e.removeAttribute("class"):e.className=t}function addEventListener(e,t,n,s){if(s)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=i=>o.call(e,n[1],i))}else e.addEventListener(t,n)}function classList(e,t,n={}){const s=Object.keys(t||{}),o=Object.keys(n);let i,a;for(i=0,a=o.length;i<a;i++){const c=o[i];!c||c==="undefined"||t[c]||(toggleClassKey(e,c,!1),delete n[c])}for(i=0,a=s.length;i<a;i++){const c=s[i],m=!!t[c];!c||c==="undefined"||n[c]===m||!m||(toggleClassKey(e,c,!0),n[c]=m)}return n}function style(e,t,n){if(!t)return n?setAttribute(e,"style"):t;const s=e.style;if(typeof t=="string")return s.cssText=t;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),t||(t={});let o,i;for(i in n)t[i]==null&&s.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(s.setProperty(i,o),n[i]=o);return n}function spread(e,t={},n,s){const o={};return createRenderEffect(()=>typeof t.ref=="function"&&use(t.ref,e)),createRenderEffect(()=>assign(e,t,n,!0,o,!0)),o}function use(e,t,n){return untrack(()=>e(t,n))}function insert(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return insertExpression(e,t,s,n);createRenderEffect(o=>insertExpression(e,t(),o,n),s)}function assign(e,t,n,s,o={},i=!1){t||(t={});for(const a in o)if(!(a in t)){if(a==="children")continue;o[a]=assignProp(e,a,null,o[a],n,i)}for(const a in t){if(a==="children")continue;const c=t[a];o[a]=assignProp(e,a,c,o[a],n,i)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function toggleClassKey(e,t,n){const s=t.trim().split(/\s+/);for(let o=0,i=s.length;o<i;o++)e.classList.toggle(s[o],n)}function assignProp(e,t,n,s,o,i){let a,c,m,l,d;if(t==="style")return style(e,n,s);if(t==="classList")return classList(e,n,s);if(n===s)return s;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const u=t.slice(3);s&&e.removeEventListener(u,s),n&&e.addEventListener(u,n)}else if(t.slice(0,10)==="oncapture:"){const u=t.slice(10);s&&e.removeEventListener(u,s,!0),n&&e.addEventListener(u,n,!0)}else if(t.slice(0,2)==="on"){const u=t.slice(2).toLowerCase(),$=DelegatedEvents.has(u);if(!$&&s){const S=Array.isArray(s)?s[0]:s;e.removeEventListener(u,S)}($||n)&&(addEventListener(e,u,n,$),$&&delegateEvents([u]))}else t.slice(0,5)==="attr:"?setAttribute(e,t.slice(5),n):(d=t.slice(0,5)==="prop:")||(m=ChildProperties.has(t))||(l=getPropAlias(t,e.tagName))||(c=Properties.has(t))||(a=e.nodeName.includes("-"))?(d&&(t=t.slice(5),c=!0),t==="class"||t==="className"?className(e,n):a&&!c&&!m?e[toPropertyName(t)]=n:e[l||t]=n):setAttribute(e,Aliases[t]||t,n);return n}function eventHandler(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const s=n[t];if(s&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?s.call(n,o,e):s.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function insertExpression(e,t,n,s,o){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,a=s!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(a){let c=n[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),n=cleanChildren(e,n,s,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=cleanChildren(e,n,s);else{if(i==="function")return createRenderEffect(()=>{let c=t();for(;typeof c=="function";)c=c();n=insertExpression(e,c,n,s)}),()=>n;if(Array.isArray(t)){const c=[],m=n&&Array.isArray(n);if(normalizeIncomingArray(c,t,n,o))return createRenderEffect(()=>n=insertExpression(e,c,n,s,!0)),()=>n;if(c.length===0){if(n=cleanChildren(e,n,s),a)return n}else m?n.length===0?appendNodes(e,c,s):reconcileArrays(e,n,c):(n&&cleanChildren(e),appendNodes(e,c));n=c}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=cleanChildren(e,n,s,t);cleanChildren(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function normalizeIncomingArray(e,t,n,s){let o=!1;for(let i=0,a=t.length;i<a;i++){let c=t[i],m=n&&n[e.length],l;if(!(c==null||c===!0||c===!1))if((l=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))o=normalizeIncomingArray(e,c,m)||o;else if(l==="function")if(s){for(;typeof c=="function";)c=c();o=normalizeIncomingArray(e,Array.isArray(c)?c:[c],Array.isArray(m)?m:[m])||o}else e.push(c),o=!0;else{const d=String(c);m&&m.nodeType===3&&m.data===d?e.push(m):e.push(document.createTextNode(d))}}return o}function appendNodes(e,t,n=null){for(let s=0,o=t.length;s<o;s++)e.insertBefore(t[s],n)}function cleanChildren(e,t,n,s){if(n===void 0)return e.textContent="";const o=s||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){const c=t[a];if(o!==c){const m=c.parentNode===e;!i&&!a?m?e.replaceChild(o,c):e.insertBefore(o,n):m&&c.remove()}else i=!0}}else e.insertBefore(o,n);return[o]}const $RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$HAS=Symbol("store-has"),$SELF=Symbol("store-self");function wrap$1(e){let t=e[$PROXY];if(!t&&(Object.defineProperty(e,$PROXY,{value:t=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const a=n[o];s[a].get&&Object.defineProperty(e,a,{enumerable:s[a].enumerable,get:s[a].get.bind(t)})}}return t}function isWrappable(e){let t;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function unwrap(e,t=new Set){let n,s,o,i;if(n=e!=null&&e[$RAW])return n;if(!isWrappable(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,c=e.length;a<c;a++)o=e[a],(s=unwrap(o,t))!==o&&(e[a]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let m=0,l=a.length;m<l;m++)i=a[m],!c[i].get&&(o=e[i],(s=unwrap(o,t))!==o&&(e[i]=s))}return e}function getNodes(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function getNode(e,t,n){if(e[t])return e[t];const[s,o]=createSignal(n,{equals:!1,internal:!0});return s.$=o,e[t]=s}function proxyDescriptor$1(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===$PROXY||t===$NODE||(delete n.value,delete n.writable,n.get=()=>e[$PROXY][t]),n}function trackSelf(e){getListener()&&getNode(getNodes(e,$NODE),$SELF)()}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}const proxyTraps$1={get(e,t,n){if(t===$RAW)return e;if(t===$PROXY)return n;if(t===$TRACK)return trackSelf(e),n;const s=getNodes(e,$NODE),o=s[t];let i=o?o():e[t];if(t===$NODE||t===$HAS||t==="__proto__")return i;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);getListener()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=getNode(s,t,i)())}return isWrappable(i)?wrap$1(i):i},has(e,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t===$HAS||t==="__proto__"?!0:(getListener()&&getNode(getNodes(e,$HAS),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,t,n,s=!1){if(!s&&e[t]===n)return;const o=e[t],i=e.length;n===void 0?(delete e[t],e[$HAS]&&e[$HAS][t]&&o!==void 0&&e[$HAS][t].$()):(e[t]=n,e[$HAS]&&e[$HAS][t]&&o===void 0&&e[$HAS][t].$());let a=getNodes(e,$NODE),c;if((c=getNode(a,t,o))&&c.$(()=>n),Array.isArray(e)&&e.length!==i){for(let m=e.length;m<i;m++)(c=a[m])&&c.$();(c=getNode(a,"length",i))&&c.$(e.length)}(c=a[$SELF])&&c.$()}function mergeStoreNode(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const o=n[s];setProperty(e,o,t[o])}}function updateArray(e,t){if(typeof t=="function"&&(t=t(e)),t=unwrap(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const o=t[n];e[n]!==o&&setProperty(e,n,o)}setProperty(e,"length",s)}else mergeStoreNode(e,t)}function updatePath(e,t,n=[]){let s,o=e;if(t.length>1){s=t.shift();const a=typeof s,c=Array.isArray(e);if(Array.isArray(s)){for(let m=0;m<s.length;m++)updatePath(e,[s[m]].concat(t),n);return}else if(c&&a==="function"){for(let m=0;m<e.length;m++)s(e[m],m)&&updatePath(e,[m].concat(t),n);return}else if(c&&a==="object"){const{from:m=0,to:l=e.length-1,by:d=1}=s;for(let u=m;u<=l;u+=d)updatePath(e,[u].concat(t),n);return}else if(t.length>1){updatePath(e[s],t,[s].concat(n));return}o=e[s],n=[s].concat(n)}let i=t[0];typeof i=="function"&&(i=i(o,n),i===o)||s===void 0&&i==null||(i=unwrap(i),s===void 0||isWrappable(o)&&isWrappable(i)&&!Array.isArray(i)?mergeStoreNode(o,i):setProperty(e,s,i))}function createStore(...[e,t]){const n=unwrap(e||{}),s=Array.isArray(n),o=wrap$1(n);function i(...a){batch(()=>{s&&a.length===1?updateArray(n,a[0]):updatePath(n,a)})}return[o,i]}class PluginSolidSettingTab extends obsidian.PluginSettingTab{constructor(n,s,o){super(n.app,n);j(this,"cleanup");this.component=s,this.props=o}display(){this.cleanup=render(()=>this.component(this.props),this.containerEl)}hide(){var n;(n=this.cleanup)==null||n.call(this)}}const name="Code Emitter",version="0.2.1",ClientAgent=`Obsidian ${name}/${version} (Just for programming learning, please let me know if it is not allowed.)`,url$4="https://api.kotlinlang.org//api/1.7.10/compiler/run";async function kotlin(e,t){const o=await(await fetch(url$4,{method:"POST",headers:{"User-Agent":ClientAgent,"Client-Agent":ClientAgent,"content-type":"application/json; charset=utf-8"},body:JSON.stringify({args:"",confType:"java",files:[{name:"File.kt",publicId:"",text:e}]})})).json();if(o.errors&&Object.keys(o.errors).length>0)for(const i of Object.values(o.errors))for(const a of i)t.error(a.message);t.write(o.text)}const url$3="https://play.rust-lang.org/execute";async function rust(e,t){const o=await(await fetch(url$3,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:"stable",mode:"debug",edition:"2021",crateType:"bin",tests:!1,code:e,backtrace:!1})})).json();t.write(o.success?o.stdout:o.stderr)}const url$2="https://api2.sololearn.com/v2/codeplayground/v2/compile",run=async(e,t)=>await(await fetch(url$2,{headers:{"User-Agent":ClientAgent,"Client-Agent":ClientAgent,Accept:"application/json, text/plain, */*","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","Content-Type":"application/json"},body:JSON.stringify({code:e,codeId:null,input:"",language:t}),method:"POST"})).json();async function cpp(e,t){const n=await run(e,"cpp");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}async function go(e,t){const n=await run(e,"go");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}const nativeGlobal=new Function("return this")(),fnRegexCheckCacheMap=new WeakMap;function isConstructable(e){const t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1;if(t)return!0;if(fnRegexCheckCacheMap.has(e))return fnRegexCheckCacheMap.get(e);let n=t;if(!n){const s=e.toString(),o=/^function\b\s[A-Z].*/,i=/^class\b/;n=o.test(s)||i.test(s)}return fnRegexCheckCacheMap.set(e,n),n}const naughtySafari=typeof document.all=="function"&&typeof document.all>"u",callableFnCacheMap=new WeakMap,isCallable=e=>{if(callableFnCacheMap.has(e))return!0;const t=naughtySafari?typeof e=="function"&&typeof e<"u":typeof e=="function";return t&&callableFnCacheMap.set(e,t),t},boundedMap=new WeakMap;function isBoundedFunction(e){if(boundedMap.has(e))return boundedMap.get(e);const t=e.name.indexOf("bound ")===0&&!e.hasOwnProperty("prototype");return boundedMap.set(e,t),t}const functionBoundedValueMap=new WeakMap;function getTargetValue(e,t){if(isCallable(t)&&!isBoundedFunction(t)&&!isConstructable(t)){const n=functionBoundedValueMap.get(t);if(n)return n;const s=Function.prototype.bind.call(t,e);for(const o in t)s[o]=t[o];if(t.hasOwnProperty("prototype")&&!s.hasOwnProperty("prototype")&&Object.defineProperty(s,"prototype",{value:t.prototype,enumerable:!1,writable:!0}),typeof t.toString=="function"){const o=t.hasOwnProperty("toString")&&!s.hasOwnProperty("toString"),i=s.toString===Function.prototype.toString;if(o||i){const a=Object.getOwnPropertyDescriptor(o?t:Function.prototype,"toString");Object.defineProperty(s,"toString",{...a,...a!=null&&a.get?null:{value:()=>t.toString()}})}}return functionBoundedValueMap.set(t,s),s}return t}function uniq(e){return e.filter(function(n){return n in this?!1:this[n]=!0},Object.create(null))}const rawObjectDefineProperty=Object.defineProperty,NODE_ENV=(typeof process<"u"?process.env.NODE_ENV:void 0)??"production",variableWhiteListInDev=NODE_ENV==="development"||window.__QIANKUN_DEVELOPMENT__?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"]:[],variableWhiteList=["System","__cjsWrapper",...variableWhiteListInDev],unscopables={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0,isNaN:!0,Infinity:!0,Reflect:!0,Float64Array:!0,Function:!0,Map:!0,NaN:!0,Promise:!0,Proxy:!0,Set:!0,parseInt:!0,requestAnimationFrame:!0},scopables={console};function makeScope(e,t){const n=scopables[t];e[t]=new Proxy({},{get(s,o,i){return s[o]??n[o]},set(s,o,i,a){return i===n[o]?delete s[t]:s[o]=i,!0}})}const useNativeWindowForBindingsProps=new Map([["fetch",!0],["mockDomAPIInBlackList",NODE_ENV==="test"]]);function createFakeWindow(e){const t=new Map,n={};return Object.getOwnPropertyNames(e).filter(s=>{if(s in scopables)return!0;const o=Object.getOwnPropertyDescriptor(e,s);return!(o!=null&&o.configurable)}).forEach(s=>{if(s in scopables){makeScope(n,s);return}const o=Object.getOwnPropertyDescriptor(e,s);if(o){const i=Object.prototype.hasOwnProperty.call(o,"get");(s==="top"||s==="parent"||s==="self"||s==="window"||NODE_ENV==="test"&&(s==="mockTop"||s==="mockSafariTop"))&&(o.configurable=!0,i||(o.writable=!0)),i&&t.set(s,!0),rawObjectDefineProperty(n,s,Object.freeze(o))}}),{fakeWindow:n,propertiesWithGetter:t}}let activeSandboxCount=0;class ProxySandbox{constructor(t,n=window){j(this,"updatedValueSet",new Set);j(this,"name");j(this,"proxy");j(this,"globalContext");j(this,"sandboxRunning",!0);j(this,"latestSetProp",null);this.name=t,this.globalContext=n;const{updatedValueSet:s}=this,{fakeWindow:o,propertiesWithGetter:i}=createFakeWindow(n),a=new Map,c=l=>o.hasOwnProperty(l)||n.hasOwnProperty(l),m=new Proxy(o,{set:(l,d,u)=>{if(this.sandboxRunning){if(!l.hasOwnProperty(d)&&n.hasOwnProperty(d)){const $=Object.getOwnPropertyDescriptor(n,d),{writable:S,configurable:A,enumerable:O}=$;S&&Object.defineProperty(l,d,{configurable:A,enumerable:O,writable:S,value:u})}else l[d]=u;return variableWhiteList.indexOf(d)!==-1&&(n[d]=u),s.add(d),this.latestSetProp=d,!0}return NODE_ENV==="development"&&console.warn(`[qiankun] Set window.${d.toString()} while sandbox destroyed or inactive in ${t}!`),!0},get:(l,d)=>{if(d===Symbol.unscopables)return unscopables;if(d==="window"||d==="self"||d==="globalThis")return m;if(d==="top"||d==="parent"||NODE_ENV==="test"&&(d==="mockTop"||d==="mockSafariTop"))return n===n.parent?m:n[d];if(d==="hasOwnProperty")return c;if(d==="document")return document;if(d==="eval")return eval;const u=i.has(d)?n[d]:d in l?l[d]:n[d],$=useNativeWindowForBindingsProps.get(d)?nativeGlobal:n;return getTargetValue($,u)},has(l,d){return d in unscopables||d in l||d in n},getOwnPropertyDescriptor(l,d){if(l.hasOwnProperty(d)){const u=Object.getOwnPropertyDescriptor(l,d);return a.set(d,"target"),u}if(n.hasOwnProperty(d)){const u=Object.getOwnPropertyDescriptor(n,d);return a.set(d,"globalContext"),u&&!u.configurable&&(u.configurable=!0),u}},ownKeys(l){return uniq(Reflect.ownKeys(n).concat(Reflect.ownKeys(l)))},defineProperty(l,d,u){switch(a.get(d)){case"globalContext":return Reflect.defineProperty(n,d,u);default:return Reflect.defineProperty(l,d,u)}},deleteProperty:(l,d)=>(l.hasOwnProperty(d)&&(delete l[d],s.delete(d)),!0),getPrototypeOf(){return Reflect.getPrototypeOf(n)}});this.proxy=m,activeSandboxCount++}active(){this.sandboxRunning||activeSandboxCount++,this.sandboxRunning=!0}inactive(){NODE_ENV==="development"&&console.info(`[qiankun:sandbox] ${this.name} modified global properties restore...`,[...this.updatedValueSet.keys()]),--activeSandboxCount===0&&variableWhiteList.forEach(t=>{this.proxy.hasOwnProperty(t)&&delete this.globalContext[t]}),this.sandboxRunning=!1}}async function js(code,output){return new Promise((resolve,reject)=>{const sandbox=new ProxySandbox("t");let run=async function(window){const{console}=window;Object.assign(console,output),sandbox.active();try{await eval(code)}catch(e){console.error(e)}finally{sandbox.inactive()}};run=run.bind(sandbox.proxy),run(sandbox.proxy).then(resolve).catch(reject)})}function urlImport(e,t){return new Promise((n,s)=>{document.head.querySelector(`script[src="${e}"]`)&&n(t?t():void 0);const o=document.createElement("script");o.src=e,o.onload=function(){n(t?t():void 0)},document.head.append(o)})}const cdn$2="https://cdn.jsdelivr.net/npm/typescript@4.7.4/lib/typescript.min.js",ts=function(){let e=null,t=null;const n=async function(s,o){e||await t();const i=e.transpile(`(async () => { ${s} })();`,{module:e.ModuleKind.ESNext,target:e.ScriptTarget.ES2018});await js(i,o)};return n.loading=!0,t=async()=>{e=await urlImport(cdn$2,()=>window.ts),n.loading=!1,console.log("typescript loaded.")},n}();async function java(e,t){const n=await run(e,"java");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}typeof process<"u"&&typeof process.browser>"u"&&(process.browser=!0);const cdn$1="https://cdn.jsdelivr.net/gh/mokeyish/pyodide-dist@0.21.2/",python=function(){let e=null,t=null,n=null;const s=async(o,i)=>{e||await n(),t=i;try{await e.runPythonAsync(o)}catch(a){i.error(a)}};return s.loading=!0,n=async()=>{e=await(await urlImport(`${cdn$1}pyodide.js`,()=>window.loadPyodide))({indexURL:cdn$1,stdout:i=>t==null?void 0:t.write(i),stderr:i=>t==null?void 0:t.error(i)}),await e.loadPackage("micropip"),console.log("python loaded."),s.loading=!1},s}();async function csharp(e,t){const n=await run(e,"cs");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}async function swift(e,t){const n=await run(e,"swift");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}const url$1="https://play.vosca.dev/run";async function v(e,t){var i;const n=new FormData;n.append("code",e);const o=await(await fetch(url$1,{method:"POST",body:n})).json();((i=o.error)==null?void 0:i.length)>0?t.error(o.error):t.write(o.output)}const cdn="https://unpkg.com/@wenyan/core/index.min.js",wy=function(){let e=null,t=null;const n=async function(s,o){e||await t();const i=e.compile(s);console.log("wenyan:"),console.log(i),await js(`(async () => { ${i} })();`,o)};return n.loading=!0,t=async()=>{e=await urlImport(cdn,()=>window.Wenyan),n.loading=!1,console.log("wenyan loaded.")},n}(),url="https://play.crystal-lang.org/run_requests";async function crystal(e,t){const i=(await(await fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({run_request:{language:"crystal",version:"1.8.2",code:e}})})).json()).run_request.run;t.write(i.stderr?i.stderr:i.stdout)}async function r(e,t){const n=await run(e,"r");t.write(n.success?n.data.output:(n.errors??[]).join(`
`))}async function html(e,t){t.write("")}const languages={kotlin,rust,java,c:cpp,cpp,csharp,js,javascript:js,html,ts,typescript:ts,python,go,swift,v,vlang:v,wy,wenyan:wy,crystal,cr:crystal,r,R:r};function createCodeOutput(){let e=[],t=[];const n=S=>{e=S(e);for(const A of t)A(e)},s=S=>{n(()=>S)},o=(S,A)=>{const O=`<div class="log-${S}">${A.join(",")}</div>`;n(_=>[..._,O])};return{subscribe:S=>(t.push(S),()=>{t=t.filter(A=>A!==S)}),log:(...S)=>o("info",S),info:(...S)=>o("info",S),debug:(...S)=>o("debug",S),warn:(...S)=>o("warn",S),error:(...S)=>o("error",S),write:(...S)=>{const A=S.join(",");n(O=>[...O,A])},clear:()=>{s([])},set:s}}const backend={...languages};var _tmpl$$3=template('<div class="setting-item mod-toggle"><div class=setting-item-info><div class=setting-item-name>Auto run</div><div class=setting-item-description>Automatically run markdown CodeBlock</div></div><div class=setting-item-control><div class=checkbox-container><input type=checkbox>');const SettingTab=e=>(()=>{var t=_tmpl$$3(),n=t.firstChild,s=n.nextSibling,o=s.firstChild,i=o.firstChild;return o.$$click=()=>e.settingsUpdate("autoRun",a=>!a),createRenderEffect(()=>o.classList.toggle("is-enabled",!!e.settings.autoRun)),createRenderEffect(()=>i.checked=e.settings.autoRun),t})();delegateEvents(["click"]);var _tmpl$$2=template("<div class=lds-ellipsis><div class=dot></div><div class=dot></div><div class=dot></div><div class=dot>");const Spin=()=>_tmpl$$2();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var md5$1={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(e,t){(function(n,s){e.exports=s()})(commonjsGlobal,function(){var n=n||function(s,o){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(i=commonjsGlobal.crypto),!i&&typeof commonjsRequire=="function")try{i=require("crypto")}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function f(){}return function(w){var b;return f.prototype=w,b=new f,f.prototype=null,b}}(),m={},l=m.lib={},d=l.Base=function(){return{extend:function(f){var w=c(this);return f&&w.mixIn(f),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var w in f)f.hasOwnProperty(w)&&(this[w]=f[w]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=l.WordArray=d.extend({init:function(f,w){f=this.words=f||[],w!=o?this.sigBytes=w:this.sigBytes=f.length*4},toString:function(f){return(f||S).stringify(this)},concat:function(f){var w=this.words,b=f.words,E=this.sigBytes,C=f.sigBytes;if(this.clamp(),E%4)for(var P=0;P<C;P++){var k=b[P>>>2]>>>24-P%4*8&255;w[E+P>>>2]|=k<<24-(E+P)%4*8}else for(var N=0;N<C;N+=4)w[E+N>>>2]=b[N>>>2];return this.sigBytes+=C,this},clamp:function(){var f=this.words,w=this.sigBytes;f[w>>>2]&=4294967295<<32-w%4*8,f.length=s.ceil(w/4)},clone:function(){var f=d.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var w=[],b=0;b<f;b+=4)w.push(a());return new u.init(w,f)}}),$=m.enc={},S=$.Hex={stringify:function(f){for(var w=f.words,b=f.sigBytes,E=[],C=0;C<b;C++){var P=w[C>>>2]>>>24-C%4*8&255;E.push((P>>>4).toString(16)),E.push((P&15).toString(16))}return E.join("")},parse:function(f){for(var w=f.length,b=[],E=0;E<w;E+=2)b[E>>>3]|=parseInt(f.substr(E,2),16)<<24-E%8*4;return new u.init(b,w/2)}},A=$.Latin1={stringify:function(f){for(var w=f.words,b=f.sigBytes,E=[],C=0;C<b;C++){var P=w[C>>>2]>>>24-C%4*8&255;E.push(String.fromCharCode(P))}return E.join("")},parse:function(f){for(var w=f.length,b=[],E=0;E<w;E++)b[E>>>2]|=(f.charCodeAt(E)&255)<<24-E%4*8;return new u.init(b,w)}},O=$.Utf8={stringify:function(f){try{return decodeURIComponent(escape(A.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return A.parse(unescape(encodeURIComponent(f)))}},_=l.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=O.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var w,b=this._data,E=b.words,C=b.sigBytes,P=this.blockSize,k=P*4,N=C/k;f?N=s.ceil(N):N=s.max((N|0)-this._minBufferSize,0);var T=N*P,R=s.min(T*4,C);if(T){for(var L=0;L<T;L+=P)this._doProcessBlock(E,L);w=E.splice(0,T),b.sigBytes-=R}return new u.init(w,R)},clone:function(){var f=d.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});l.Hasher=_.extend({cfg:d.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(f){return function(w,b){return new f.init(b).finalize(w)}},_createHmacHelper:function(f){return function(w,b){return new x.HMAC.init(f,b).finalize(w)}}});var x=m.algo={};return m}(Math);return n})}(core)),core.exports}(function(e,t){(function(n,s){e.exports=s(requireCore())})(commonjsGlobal,function(n){return function(s){var o=n,i=o.lib,a=i.WordArray,c=i.Hasher,m=o.algo,l=[];(function(){for(var O=0;O<64;O++)l[O]=s.abs(s.sin(O+1))*4294967296|0})();var d=m.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,_){for(var x=0;x<16;x++){var f=_+x,w=O[f];O[f]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var b=this._hash.words,E=O[_+0],C=O[_+1],P=O[_+2],k=O[_+3],N=O[_+4],T=O[_+5],R=O[_+6],L=O[_+7],B=O[_+8],D=O[_+9],U=O[_+10],M=O[_+11],I=O[_+12],F=O[_+13],W=O[_+14],H=O[_+15],p=b[0],h=b[1],g=b[2],y=b[3];p=u(p,h,g,y,E,7,l[0]),y=u(y,p,h,g,C,12,l[1]),g=u(g,y,p,h,P,17,l[2]),h=u(h,g,y,p,k,22,l[3]),p=u(p,h,g,y,N,7,l[4]),y=u(y,p,h,g,T,12,l[5]),g=u(g,y,p,h,R,17,l[6]),h=u(h,g,y,p,L,22,l[7]),p=u(p,h,g,y,B,7,l[8]),y=u(y,p,h,g,D,12,l[9]),g=u(g,y,p,h,U,17,l[10]),h=u(h,g,y,p,M,22,l[11]),p=u(p,h,g,y,I,7,l[12]),y=u(y,p,h,g,F,12,l[13]),g=u(g,y,p,h,W,17,l[14]),h=u(h,g,y,p,H,22,l[15]),p=$(p,h,g,y,C,5,l[16]),y=$(y,p,h,g,R,9,l[17]),g=$(g,y,p,h,M,14,l[18]),h=$(h,g,y,p,E,20,l[19]),p=$(p,h,g,y,T,5,l[20]),y=$(y,p,h,g,U,9,l[21]),g=$(g,y,p,h,H,14,l[22]),h=$(h,g,y,p,N,20,l[23]),p=$(p,h,g,y,D,5,l[24]),y=$(y,p,h,g,W,9,l[25]),g=$(g,y,p,h,k,14,l[26]),h=$(h,g,y,p,B,20,l[27]),p=$(p,h,g,y,F,5,l[28]),y=$(y,p,h,g,P,9,l[29]),g=$(g,y,p,h,L,14,l[30]),h=$(h,g,y,p,I,20,l[31]),p=S(p,h,g,y,T,4,l[32]),y=S(y,p,h,g,B,11,l[33]),g=S(g,y,p,h,M,16,l[34]),h=S(h,g,y,p,W,23,l[35]),p=S(p,h,g,y,C,4,l[36]),y=S(y,p,h,g,N,11,l[37]),g=S(g,y,p,h,L,16,l[38]),h=S(h,g,y,p,U,23,l[39]),p=S(p,h,g,y,F,4,l[40]),y=S(y,p,h,g,E,11,l[41]),g=S(g,y,p,h,k,16,l[42]),h=S(h,g,y,p,R,23,l[43]),p=S(p,h,g,y,D,4,l[44]),y=S(y,p,h,g,I,11,l[45]),g=S(g,y,p,h,H,16,l[46]),h=S(h,g,y,p,P,23,l[47]),p=A(p,h,g,y,E,6,l[48]),y=A(y,p,h,g,L,10,l[49]),g=A(g,y,p,h,W,15,l[50]),h=A(h,g,y,p,T,21,l[51]),p=A(p,h,g,y,I,6,l[52]),y=A(y,p,h,g,k,10,l[53]),g=A(g,y,p,h,U,15,l[54]),h=A(h,g,y,p,C,21,l[55]),p=A(p,h,g,y,B,6,l[56]),y=A(y,p,h,g,H,10,l[57]),g=A(g,y,p,h,R,15,l[58]),h=A(h,g,y,p,F,21,l[59]),p=A(p,h,g,y,N,6,l[60]),y=A(y,p,h,g,M,10,l[61]),g=A(g,y,p,h,P,15,l[62]),h=A(h,g,y,p,D,21,l[63]),b[0]=b[0]+p|0,b[1]=b[1]+h|0,b[2]=b[2]+g|0,b[3]=b[3]+y|0},_doFinalize:function(){var O=this._data,_=O.words,x=this._nDataBytes*8,f=O.sigBytes*8;_[f>>>5]|=128<<24-f%32;var w=s.floor(x/4294967296),b=x;_[(f+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,_[(f+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,O.sigBytes=(_.length+1)*4,this._process();for(var E=this._hash,C=E.words,P=0;P<4;P++){var k=C[P];C[P]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return E},clone:function(){var O=c.clone.call(this);return O._hash=this._hash.clone(),O}});function u(O,_,x,f,w,b,E){var C=O+(_&x|~_&f)+w+E;return(C<<b|C>>>32-b)+_}function $(O,_,x,f,w,b,E){var C=O+(_&f|x&~f)+w+E;return(C<<b|C>>>32-b)+_}function S(O,_,x,f,w,b,E){var C=O+(_^x^f)+w+E;return(C<<b|C>>>32-b)+_}function A(O,_,x,f,w,b,E){var C=O+(x^(_|~f))+w+E;return(C<<b|C>>>32-b)+_}o.MD5=c._createHelper(d),o.HmacMD5=c._createHmacHelper(d)}(Math),n.MD5})})(md5$1);var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports);var _tmpl$$1=template("<hr class=code-seprator>"),_tmpl$2=template("<div class=loadding>"),_tmpl$3=template("<div class=code-output>"),_tmpl$4=template('<div class="code-emitter-block solid">'),_tmpl$5=template("<ul>"),_tmpl$6=template("<li>"),_tmpl$7=template('<i aria-label=clear><svg class=svg-icon xmlns=http://www.w3.org/2000/svg width=0.75em height=1em viewBox="0 0 384 512"><path fill=currentColor d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7L86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256L41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256z">'),_tmpl$8=template('<i aria-label=play><svg class=svg-icon xmlns=http://www.w3.org/2000/svg width=0.75em height=1em viewBox="0 0 384 512"><path fill=currentColor d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41z">'),_tmpl$9=template("<div class=html-viewer><div>");const Play=e=>{const t=()=>`code-emitter-cache-${e.sourcePath}`,n=()=>md5(e.code).toString(),s=createCodeOutput(),[o,i]=createSignal();s.subscribe(i);const a=()=>{var $;return(($=o())==null?void 0:$.length)>0},[c,m]=createSignal(!1),l=async()=>{m(!0);try{await backend[e.lang](e.code,s)}finally{m(!1)}},d=()=>{const $=localStorage.getItem(t());if(!$)return;const A=JSON.parse($)[n()];if(A)return A.outputs},u=()=>{const $=localStorage.getItem(t()),S=$?JSON.parse($):{};S[n()]={outputs:o(),lastAccessTime:Date.now()},localStorage.setItem(t(),JSON.stringify(S))};return onMount(async()=>{const $=d();$?s.set($):e.autoRun&&await l()}),onCleanup(u),(()=>{var $=_tmpl$4();return insert($,createComponent(Show,{get when(){return createMemo(()=>!c())()&&!a()},get children(){return createComponent(PlayButton,{class:"button-play",onClick:l})}}),null),insert($,createComponent(Show,{get when(){return c()||a()},get children(){return[_tmpl$$1(),(()=>{var S=_tmpl$3();return insert(S,createComponent(Show,{get when(){return c()},get fallback(){return[createComponent(Show,{get when(){return e.lang==="html"},get fallback(){return(()=>{var A=_tmpl$5();return insert(A,createComponent(For,{get each(){return o()},children:O=>(()=>{var _=_tmpl$6();return _.innerHTML=O,_})()})),A})()},get children(){return createComponent(HtmlViewer,{get code(){return e.code}})}}),createComponent(ClearButton,{class:"button-clear",get onClick(){return s.clear}})]},get children(){var A=_tmpl$2();return insert(A,createComponent(Spin,{})),A}})),S})()]}}),null),$})()},ClearButton=e=>(()=>{var t=_tmpl$7();return spread(t,e,!1),t})(),PlayButton=e=>(()=>{var t=_tmpl$8();return spread(t,e,!1),t})(),HtmlViewer=e=>{let t,n,s;return onMount(()=>{t&&(s=t.attachShadow({mode:"closed"}),s.appendChild(n))}),onCleanup(()=>{t==null||t.detach()}),(()=>{var o=_tmpl$9(),i=o.firstChild,a=t;typeof a=="function"?use(a,o):t=o;var c=n;return typeof c=="function"?use(c,i):n=i,createRenderEffect(()=>i.innerHTML=e.code),o})()};var _tmpl$=template("<pre><code>");const CodeBlock=e=>{const t=async s=>{(await obsidian.loadPrism()).highlightElement(s)},n=()=>`language-${e.lang}`;return(()=>{var s=_tmpl$(),o=s.firstChild;return use(t,o),insert(o,()=>e.code),insert(s,createComponent(Play,e),null),createRenderEffect(()=>className(s,n())),s})()},SETTING_DEFAULT={autoRun:!1};class CodeEmitterPlugin extends obsidian.Plugin{constructor(n,s){super(n,s);j(this,"settings");j(this,"settingsUpdate");const[o,i]=createStore(SETTING_DEFAULT);this.settings=o,this.settingsUpdate=i}async onload(){await this.loadSettings(),this.addSettingTab(new PluginSolidSettingTab(this,SettingTab,{settings:this.settings,settingsUpdate:this.settingsUpdate})),Object.keys(backend).forEach(n=>{n.includes("+")||n.includes("#")||this.registerMarkdownCodeBlockProcessor(n,async(s,o,i)=>{render(()=>{const a=this;return createComponent(CodeBlock,{lang:n,code:s,get sourcePath(){return i.sourcePath},get autoRun(){return a.settings.autoRun}})},o)},-1)})}async unload(){await this.saveSettings(),super.unload()}async loadSettings(){this.settingsUpdate(Object.assign({},SETTING_DEFAULT,await this.loadData()))}async saveSettings(){await this.saveData(unwrap(this.settings))}}exports.default=CodeEmitterPlugin;
